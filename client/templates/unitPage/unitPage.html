<template name="unitPage">
  <div class="template-unitPage">
    {{#with contentPage}}
      {{> unitContent}}
      {{> relatedConcepts grantedConcepts=grantedConcepts neededConcepts=neededConcepts }}
      <div class="card-panel">
        <div class="row no-margin">
          <div class="col s10">
            <h3>{{name}}</h3>
            <p>{{!-- <img src="../images/avatars/deslingo.jpg" alt=" " class="circle responsive-img" id="avatar-thumbnail"> --}}
              <span class="grey-text">
                <p>by
                  {{#each author in authorsInfo (authors)}}
                    {{author.username}}
                  {{/each}}
                </p>
                <p>
                  {{readableDate created_on}}
                </p>
              </span>
            </p>
          </div>
          <div class="col s2 right-align">
            {{#if isGodMode}}
              <!-- <a href="{{_id}}/edit" class="btn-floating btn-large waves-effect waves-light green tooltipped" data-position="left" data-delay="1" data-tooltip="Edit"> -->
              <a class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="left" data-delay="1" data-tooltip="Edit this unit." href="{{_id}}/edit">
                <i class="material-icons">create</i>
              </a>
            {{else}}
              <!-- <a class="btn-floating btn-large waves-effect waves-light disabled tooltipped" data-position="left" data-delay="1" data-tooltip="Edit is temporarily disabled.">
                                    <i class="material-icons">create</i>
                                </a> -->
            {{/if}}
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <h6 class="grey-text">
              <span class="tooltipped" data-position="top" data-delay="1" data-tooltip="{{views}} people have done this lesson">
                <i class="tiny material-icons data-icons ">done</i>
                {{views}}</span>
            </h6>
            <p class="pre">{{description}}</p>
          </div>
        </div>
      </div>
      {{!--
            <div class="card-panel">
                <div class="comment-section">
                    {{_id}}
      {{> commentsBox id=_id}}
    </div>
  </div>
  --}}
{{/with}}
</div>
</template>
<template name="unitContent">
<div class="card-content">
{{#unless failedUnitAndNoGoal}}
  {{#if unitIsOneSectionAndNoExercise}}
    {{> contentByType isUnitPage=true content=content}}
  {{else}}
    <div class="unit-tabs">
      <div class="row">
        <ul class="tabs">
          {{#each content}}
            {{#if isType 'unitSection'}}
              <li class="tab col s2">
                <a href="#unitTab{{increaseByOne @index}}">Part
                  {{increaseByOne @index}}</a>
              </li>
            {{/if}}
            {{#if isType 'unitEvaluationSection'}}
              <li class="tab col s2">
                <a href="#unitTab{{increaseByOne @index}}">Evaluation</a>
              </li>
            {{/if}}
          {{/each }}
        </ul>
      </div>
    </div>
    <div class="unit-content">
      <div class="section">
        {{> contentByType isUnitPage=true content=content}}
      </div>
    </div>
  {{/if}}
{{else}}
  <div class="row center-align">
    <div class="section">
      <p>Do you want to be able to understand it? You can create your own path towards
        {{name}}
      </p>
    </div>
    <div class="section">
      {{#unless isLoading}}
        <a class="waves-effect waves-teal btn set-goal">
          <i class="material-icons left">explore</i>Set this Unit as a learning goal</a>
      {{else}}
        {{> smallLoading}}
      {{/unless}}
    </div>
  </div>
{{/unless}}
</div>
</template>

<template name="userConfirmation">
<div class="section">
{{#unless isLoading}}
  {{#if currentUser}}

  <div class="ui buttons understood-buttons">
    <button class="ui positive button" id="understood">Yes</button>
    <div class="or"></div>
    <button class="ui negative button"  id="notUnderstood">No</button>
  </div>
  {{else}}
    <div class="row center-align understood-buttons">
      <a href="#!" class="white-text green btn disabled tooltipped" data-position="right" data-delay="20" data-tooltip="Login so we can follow your progress!">I understood</a>
      <a href="#!" class="white-text green btn disabled tooltipped" data-position="right" data-delay="20" data-tooltip="Login so we can follow your progress!">Didn't understand</a>
    </div>
  {{/if}}
{{else}}
  <div class="row center-align understood-buttons">
    {{> smallLoading}}
  </div>
{{/unless}}
</div>
</template>
<template name="relatedConcepts">
<div class="card-action">
<div class="row ">
  <div class="col s1">
    <i class="right small mdi-action-exit-to-app"></i>
  </div>
  <div class="col s5">
    <span class="grey-text text-darken-2">You should be familiar with:</span>
    <br>
    {{#each setOfConceptsID in neededConcepts}}
      {{#each concept in subConceptsOf (setOfConceptsID)}}
        <a>{{concept.name}}</a>
      {{/each}}
      <br>
      or
    {{/each}}
  </div>
  <div class="col s1">
    <i class="right small mdi-action-exit-to-app"></i>
  </div>
  <div class="col s5">
    <span class="grey-text text-darken-2">This unit helps you master:</span>
    <br>
    {{#each concept in grantedConcepts}}
      <!-- <a href="../concept/{{concept._id}}">{{concept.name}}</a> -->
      <a>{{concept.name}}</a>
    {{/each}}
  </div>
</div>
</div>
</template>




































<!-- <template name="unitPage">
  <div class="template-unitPage">
    {{#with contentPage}}
      {{> unitContent}}
      {{> relatedConcepts grantedConcepts=grantedConcepts neededConcepts=neededConcepts }}
      <div class="card-panel">
        <div class="row no-margin">
          <div class="col s10">
            <h3>{{name}}</h3>
            <p><span class="grey-text">
                <p>by
                  {{#each author in authorsInfo (authors)}}
                    {{author.username}}
                  {{/each}}
                </p>
                <p>
                  {{readableDate created_on}}
                </p>
              </span>
            </p>
          </div>
          <div class="col s2 right-align">
            {{#if isGodMode}}
              <a class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="left" data-delay="1" data-tooltip="Edit this unit." href="{{_id}}/edit">
                <i class="material-icons">create</i>
              </a>
            {{else}}

            {{/if}}
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <h6 class="grey-text">
              <span class="tooltipped" data-position="top" data-delay="1" data-tooltip="{{views}} people have done this lesson">
                <i class="tiny material-icons data-icons ">done</i>
                {{views}}</span>
            </h6>
            <p class="pre">{{description}}</p>
          </div>
        </div>
      </div>
{{/with}}
</div>
</template>
<template name="unitContent">
<div class="card-content">
{{#unless failedUnitAndNoGoal}}
  {{#if unitIsOneSectionAndNoExercise}}
    {{> contentByType isUnitPage=true content=content}}
  {{else}}
    <div class="unit-tabs">
      <div class="row">
        <ul class="tabs">
          {{#each content}}
            {{#if isType 'unitSection'}}
              <li class="tab col s2">
                <a href="#unitTab{{increaseByOne @index}}">Part
                  {{increaseByOne @index}}</a>
              </li>
            {{/if}}
            {{#if isType 'unitEvaluationSection'}}
              <li class="tab col s2">
                <a href="#unitTab{{increaseByOne @index}}">Evaluation</a>
              </li>
            {{/if}}
          {{/each }}
        </ul>
      </div>
    </div>
    <div class="unit-content">
      <div class="section">
        {{> contentByType isUnitPage=true content=content}}
      </div>
    </div>
  {{/if}}
{{else}}
  <div class="row center-align">
    <div class="section">
      <p>Do you want to be able to understand it? You can create your own path towards
        {{name}}
      </p>
    </div>
    <div class="section">
      {{#unless isLoading}}
        <a class="waves-effect waves-teal btn set-goal">
          <i class="material-icons left">explore</i>Set this Unit as a learning goal</a>
      {{else}}
        {{> smallLoading}}
      {{/unless}}
    </div>
  </div>
{{/unless}}
</div>
</template>

<template name="userConfirmation">
<div class="section">
{{#unless isLoading}}
  {{#if currentUser}}

    <div class="row center-align understood-buttons">
      <a href="#!" class="waves-effect waves-light white-text green btn" id="understood">I understood</a>
      <a href="#!" class="waves-effect waves-light white-text red btn" id="notUnderstood">Didn't understand</a>
    </div>
  {{else}}
    <div class="row center-align understood-buttons">
      <a href="#!" class="white-text green btn disabled tooltipped" data-position="right" data-delay="20" data-tooltip="Login so we can follow your progress!">I understood</a>
      <a href="#!" class="white-text green btn disabled tooltipped" data-position="right" data-delay="20" data-tooltip="Login so we can follow your progress!">Didn't understand</a>
    </div>
  {{/if}}
{{else}}
  <div class="row center-align understood-buttons">
    {{> smallLoading}}
  </div>
{{/unless}}
</div>
</template>
<template name="relatedConcepts">
<div class="card-action">
<div class="row ">
  <div class="col s1">
    <i class="right small mdi-action-exit-to-app"></i>
  </div>
  <div class="col s5">
    <span class="grey-text text-darken-2">You should be familiar with:</span>
    <br>
    {{#each setOfConceptsID in neededConcepts}}
      {{#each concept in subConceptsOf (setOfConceptsID)}}
        <a>{{concept.name}}</a>
      {{/each}}
      <br>
      or
    {{/each}}
  </div>
  <div class="col s1">
    <i class="right small mdi-action-exit-to-app"></i>
  </div>
  <div class="col s5">
    <span class="grey-text text-darken-2">This unit helps you master:</span>
    <br>
    {{#each concept in grantedConcepts}}
      <a>{{concept.name}}</a>
    {{/each}}
  </div>
</div>
</div>
</template> -->
