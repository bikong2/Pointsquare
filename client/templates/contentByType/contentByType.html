<template name="contentByType">
  {{#let isUnitPage=isUnitPage isExamPage=isExamPage unitId=unitId unitIsOneSectionAndNoExercise=unitIsOneSectionAndNoExercise}}
    {{#each content}}
      <div class="ui tab" data-tab="{{increaseByOne @index}}">
        <div class="ui hidden divider"></div>
        {{#unless unitIsOneSectionAndNoExercise}}
          <div class="tab-navigation">
            <div class="ui compact basic left floated segment tab-navigation-button">
              <button class="ui compact circular basic icon button {{isFirstTab (@index)}} previous-tab" current-tab={{increaseByOne @index}}>
                <i class="white angle left icon {{isFirstTab (@index)}}" current-tab={{increaseByOne @index}}></i>
              </button>
            </div>
            <div class="ui compact basic right floated right aligned segment tab-navigation-button">
              <button class="ui compact circular basic icon button {{isLastTab (@index)}} next-tab" current-tab={{increaseByOne @index}}>
                <i class="white angle right icon {{isLastTab (@index)}}" current-tab={{increaseByOne @index}}></i>
              </button>
            </div>
          </div>
        {{/unless}}
        <!-- <div id="unitTab{{increaseByOne @index}}"> -->
        {{#if isType 'unitSection'}}

          {{#each subContent}}
            {{#if isType 'text'}}
              {{#mathjax}}
                <p>
                  {{#markdown}}{{text}}{{/markdown}}
                </p>
              {{/mathjax}}
            {{/if}}
            {{#if isType 'image'}}
              <img class="responsive-img" src="../images/units/{{imgURL}}">
            {{/if}}
            {{#if isType 'remoteImage'}}
              <img class="ui centered big fluid image" src="{{remoteImgURL}}">
            {{/if}}
            {{#if isType 'youtube'}}
              <div class="ui two column centered grid">
                <div class="column">
                  <div class="ui centered embed" data-source="youtube" data-id="{{youtubeVidID}}"></div>
                </div>
              </div>
            {{/if}}
            <!--  WARNING: REMOVE CSS AFTER REMOVING MATERIALIZE -->
            <div class="ui hidden divider" style="visibility: hidden;"></div>
          {{/each }}
        {{/if}}
        {{#if isType 'unitEvaluationSection'}}
          <div class="ui hidden divider" style="visibility: hidden;"></div>
          {{#if evaluationIsType 'exerciseRadioButton'}}

            {{> exerciseRadioButton unitId=unitId question=question options=options}}
          {{/if}}
          {{#if evaluationIsType 'exerciseString'}}
            {{#if isUnitPage}}
              {{> exerciseString}}
              <div class="section center-align">
                <button class="btn waves-effect waves-light {{answerFeedback}}" type="submit" name="action" id="exerciseButton">Submit
                </button>
              </div>
            {{/if}}
            {{#if isExamPage}}
              <div class="row">
                <div class="col s9">
                  {{> exerciseString unitId=unitId question=question answers=answers}}
                </div>
                <div class="col s3">
                  <a class="waves-effect waves-light btn tooltipped" data-position="top" data-tooltip="Mark question as known, without solving">
                    <i class="material-icons">done</i>
                  </a>
                  <a class="waves-effect waves-light btn tooltipped" data-position="top" data-tooltip="Set question as goal">
                    <i class="material-icons">navigation</i>
                  </a>
                </div>
              </div>
            {{/if}}

          {{/if}}
          {{#if evaluationIsType 'userConfirmation'}}
            {{#if isUnitPage}}
              {{> userConfirmation}}
            {{/if}}
          {{/if}}
          <div class="ui hidden divider" style="visibility: hidden;"></div>
        {{/if}}
      </div>
    {{/each }}
  {{/let}}
</template>
<template name="exerciseString">
  <div class="section center-align">
    {{#if currentUser}}
      {{#mathjax}}
        <p>
          {{#markdown}}{{question}}{{/markdown}}
        </p>
      {{/mathjax}}
      <form class="exerciseStringForm" id={{unitId}}>
        <input type="text" name="exerciseString" class="exerciseInputText">
      </form>
    {{else}}
      {{#mathjax}}
        <p>
          {{#markdown}}{{question}}{{/markdown}}
        </p>
      {{/mathjax}}
      <form class="exerciseStringForm" id={{unitId}}>
        <!-- <input disabled value="Login so we can follow your progress " type="text" name="exerciseString" id="exerciseInputText"> -->
        <button class="btn waves-effect waves-light {{answerFeedback}} disabled disabled tooltipped" data-position="right" data-delay="20" data-tooltip="Login so we can follow your progress!" type="submit" name="action" id="exerciseButton">Submit</button>
      </form>
    {{/if}}
    {{#if isLoading}}
      <div class="row center-align">
        {{> smallLoading}}
      </div>
    {{/if}}
  </div>
</template>
<template name="exerciseRadioButton">
  {{#mathjax}}
    <p>
      {{#markdown}}
        {{question}}
      {{/markdown}}
    </p>
  {{/mathjax}}
  <form id="exerciseRadioButtonForm" action="#">
    {{#if currentUser}}
      {{#let unitId=unitId}}
        {{#each options}}
          <p class="center-align">
            <input name={{unitId}} class="{{isCorrectOption}}RadioButton" type="radio" id="radioButton_{{unitId}}_{{@index}}" unit_id="{{unitId}}"/>
            <label for="radioButton_{{unitId}}_{{@index}}" class="{{isCorrectOption}}RadioButtonLabel">
              {{#mathjax}}
                {{#markdown}}{{label}}{{/markdown}}
              {{/mathjax}}
            </label>
          </p>
        {{/each}}
      {{/let}}
    {{else}}
      {{#each options}}
        <p class="center-align tooltipped" data-position="bottom" data-delay="20" data-tooltip="Login so we can follow your progress!">
          <input name="group1" class="{{isCorrectOption}}RadioButton" disabled="disabled" type="radio" id="radioButton{{@index}}"/>
          <label for="radioButton{{@index}}" class="{{isCorrectOption}}RadioButtonLabel">
            {{#mathjax}}
              {{#markdown}}{{label}}{{/markdown}}
            {{/mathjax}}
          </label>
        </p>
      {{/each}}
    {{/if}}
    {{#if isLoading}}
      <div class="row center-align">
        {{> smallLoading}}
      </div>
    {{/if}}
  </form>
</template>
<template name="userConfirmation">
  <div class="center aligned ui grid">
    {{#unless isLoading}}
      {{#if currentUser}}
        <div class="ui buttons understood-buttons">
          <button class="ui positive button" id="understood">Understood</button>
          <div class="or"></div>
          <button class="ui negative button" id="notUnderstood">Not understood</button>
        </div>
      {{else}}
        <div data-tooltip="Login so we can follow your progress!" data-inverted="" data-position="right center">
          <div class="ui buttons understood-buttons">
            <button class="ui disabled button">Understood</button>
            <div class="or"></div>
            <button class="ui disabled button">Not understood</button>
          </div>
        </div>
        <!-- <div class="row center-align understood-buttons">
          <a href="#!" class="white-text green btn disabled tooltipped" data-position="right" data-delay="20" data-tooltip="Login so we can follow your progress!">I understood</a>
          <a href="#!" class="white-text green btn disabled tooltipped" data-position="right" data-delay="20" data-tooltip="Login so we can follow your progress!">Didn't understand</a>
        </div> -->
      {{/if}}
    {{else}}
      <div class="row center-align understood-buttons">
        {{> smallLoading}}
      </div>
    {{/unless}}
  </div>
</template>

<!-- <template name="contentByType_materialize">
  {{#let isUnitPage=isUnitPage isExamPage=isExamPage unitId=unitId}}

    {{#each content}}
      <div id="unitTab{{increaseByOne @index}}" class="col s12">
        {{#if isType 'unitSection'}}
          {{#each subContent}}
            {{#if isType 'text'}}
              {{#mathjax}}
                <p>
                  {{#markdown}}{{text}}{{/markdown}}
                </p>
              {{/mathjax}}
            {{/if}}
            {{#if isType 'image'}}
              <img class="responsive-img" src="../images/units/{{imgURL}}">
            {{/if}}
            {{#if isType 'remoteImage'}}
              <div class="section center-align">
                <img class="responsive-img" style="max-height: 300px;" src="{{remoteImgURL}}">
              </div>
            {{/if}}
            {{#if isType 'youtube'}}
              <div class="section">
                <div class="video-container no-controls">
                  <iframe width="853" height="480" margin-bottom="100" src="//www.youtube.com/embed/{{youtubeVidID}}?rel=0;autohide=1" frameborder="0" allowfullscreen></iframe>
                </div>
              </div>
            {{/if}}
          {{/each }}
        {{/if}}
        {{#if isType 'unitEvaluationSection'}}
          {{#if evaluationIsType 'exerciseRadioButton'}}

            {{> exerciseRadioButton unitId=unitId question=question options=options}}
          {{/if}}
          {{#if evaluationIsType 'exerciseString'}}
            {{#if isUnitPage}}
              {{> exerciseString}}
              <div class="section center-align">
                <button class="btn waves-effect waves-light {{answerFeedback}}" type="submit" name="action" id="exerciseButton">Submit
                </button>
              </div>
            {{/if}}
            {{#if isExamPage}}
              <div class="row">
                <div class="col s9">
                  {{> exerciseString unitId=unitId question=question answers=answers}}
                </div>
                <div class="col s3">
                  <a class="waves-effect waves-light btn tooltipped" data-position="top" data-tooltip="Mark question as known, without solving">
                    <i class="material-icons">done</i>
                  </a>
                  <a class="waves-effect waves-light btn tooltipped" data-position="top" data-tooltip="Set question as goal">
                    <i class="material-icons">navigation</i>
                  </a>
                </div>
              </div>
            {{/if}}

          {{/if}}
          {{#if evaluationIsType 'userConfirmation'}}
            {{#if isUnitPage}}
              {{> userConfirmation}}
            {{/if}}
          {{/if}}
        {{/if}}
      </div>
    {{/each }}
  {{/let}}
</template>
<template name="exerciseString">
  <div class="section center-align">
    {{#if currentUser}}
      {{#mathjax}}
        <p>
          {{#markdown}}{{question}}{{/markdown}}
        </p>
      {{/mathjax}}
      <form class="exerciseStringForm" id={{unitId}}>
        <input type="text" name="exerciseString" class="exerciseInputText">
      </form>
    {{else}}
      {{#mathjax}}
        <p>
          {{#markdown}}{{question}}{{/markdown}}
        </p>
      {{/mathjax}}
      <form class="exerciseStringForm" id={{unitId}}>
        <button class="btn waves-effect waves-light {{answerFeedback}} disabled disabled tooltipped" data-position="right" data-delay="20" data-tooltip="Login so we can follow your progress!" type="submit" name="action" id="exerciseButton">Submit</button>
      </form>
    {{/if}}
    {{#if isLoading}}
      <div class="row center-align">
        {{> smallLoading}}
      </div>
    {{/if}}
  </div>
</template>
<template name="exerciseRadioButton">
  {{#mathjax}}

          {{#markdown}}<p class="section center-align">{{question}}</p>{{/markdown}}

  {{/mathjax}}
  <form id="exerciseRadioButtonForm" action="#">
    {{#if currentUser}}
      {{#let unitId=unitId}}
        {{#each options}}
          <p class="center-align">
            <input name={{unitId}} class="{{isCorrectOption}}RadioButton" type="radio" id="radioButton_{{unitId}}_{{@index}}" unit_id="{{unitId}}"/>
            <label for="radioButton_{{unitId}}_{{@index}}" class="{{isCorrectOption}}RadioButtonLabel">{{#mathjax}}{{#markdown}}{{label}}{{/markdown}}{{/mathjax}}</label>
          </p>
        {{/each}}
      {{/let}}
    {{else}}
      {{#each options}}
        <p class="center-align tooltipped" data-position="bottom" data-delay="20" data-tooltip="Login so we can follow your progress!">
          <input name="group1" class="{{isCorrectOption}}RadioButton" disabled="disabled" type="radio" id="radioButton{{@index}}"/>
          <label for="radioButton{{@index}}" class="{{isCorrectOption}}RadioButtonLabel">{{#mathjax}}{{#markdown}}{{label}}{{/markdown}}{{/mathjax}}</label>
        </p>
      {{/each}}
    {{/if}}
    {{#if isLoading}}
      <div class="row center-align">
        {{> smallLoading}}
      </div>
    {{/if}}
  </form>
</template> -->
